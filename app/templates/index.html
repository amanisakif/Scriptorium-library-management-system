{% extends 'base.html' %}

{% block content %}
<div class="container-fluid p-0 position-relative">
    <img src="/static/img/library-welcome-horizontal.jpg" alt="Library System" class="img-fluid w-100" style="height: 100vh; object-fit: cover;">
    <div class="overlay-content position-absolute top-0 end-0 h-100 bg-white bg-opacity-75 p-5 rounded shadow">
        <h1>Welcome to Dar al-Kutub - دار الكتب</h1>
        <p class="lead">Manage your library efficiently with our comprehensive system.</p>
        <p>Our library system allows you to:</p>
        <ul>
            <li>View all books in your collection</li>
            <li>Check available and borrowed books</li>
            <li>Track loan history of users</li>
            <li>Generate insightful statistics</li>
            <li>Simulate data for testing purposes</li>
        </ul>
        <div class="d-flex justify-content-center">
            <button id="simulateButton" class="btn btn-custom mt-3" onclick="simulateData()">Simulate Data</button>
        </div>
        <p id="statusMessage" class="mt-3"></p>
    </div>
</div>

<!-- Add CSS Styling for Button and Spinner -->
<style>
    .overlay-content {
        position: absolute;
        top: 0;
        right: 0;
        width: 35%;
        height: 100%;
        text-align: center;
        background: rgba(255, 255, 255, 0.85);
        color: black;
        padding: 30px;
        border-radius: 0 10px 10px 0;
        box-shadow: -4px 0 8px rgba(0, 0, 0, 0.1);
    }
    .btn-custom {
        background-color: #DAA520; /* Golden color */
        border: none;
        padding: 10px 20px;
        font-size: 1.2em;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    .btn-custom:hover {
        background-color: #C99A2D; /* Slightly darker golden color for hover */
    }
    .btn-custom:active {
        background-color: #B8860B; /* Darker golden color for active state */
    }
</style>

<!-- Add JavaScript for Asynchronous Data Simulation -->
<script>
    function simulateData() {
        const button = document.getElementById('simulateButton');
        const statusMessage = document.getElementById('statusMessage');
        button.disabled = true;
        statusMessage.textContent = 'Simulating data...';

        fetch('/simulate-data')
            .then(response => response.text())
            .then(data => {
                statusMessage.textContent = data;
                button.classList.add('btn-success');
            })
            .catch(error => {
                statusMessage.textContent = 'Error simulating data';
                console.error('Error:', error);
            })
            .finally(() => {
                button.disabled = false;
                button.style.backgroundColor = '#B8860B'; /* Final clicked color */
            });
    }
</script>
{% endblock %}
